# Weather SDK Projects Overview
Этот репозиторий содержит два связанных Java-проекта на Spring Boot, реализующих SDK для работы с OpenWeatherMap API. 
Оба проекта соответствуют требованиям технического задания, но имеют разные архитектурные подходы:

kameleoon-weather-api: базовая реализация с упрощённой (одиночной) моделью SDK.
weather-sdk-multi: улучшенная реализация с поддержкой многоключевого режима, где можно одновременно использовать 
несколько экземпляров SDK с разными API-ключами.

# Общие характеристики
Оба проекта реализуют следующие требования:

Инициализация SDK с передачей API-ключа и режима работы:
on-demand — обновление погоды только по запросу.
polling — фоновое обновление данных каждую минуту (для всех закэшированных городов).
Кэширование данных на 1 минуту (настраиваемо).
Лимит кэша — до 10 городов.
Поддержка получения погоды для одного или нескольких городов.
Хранение API-ключей в PostgreSQL.
REST API с валидацией входных параметров.
Обработка ошибок через глобальный обработчик исключений.
Поддержка Docker и docker-compose.

## Проект 1: weather-api
Архитектура
Один глобальный экземпляр SDK.
Кэш и polling привязаны к приложению, а не к конкретному API-ключу.
Режим (on-demand / polling) указывается в каждом запросе.

# Проект 2: weather-sdk
Архитектура
Поддержка множества изолированных экземпляров SDK, каждый со своим:
API-ключом,
режимом работы (on-demand или polling),
кэшем (до 10 городов),
фоновым polling-планировщиком (если включён).
Запрещено создавать два SDK с одинаковым ключом.
Возможность удалить экземпляр SDK вручную → очистка кэша + остановка polling.

# Управление SDK через REST API
## POST /api/sdk/initialize?apiKey=...&mode=polling
Создать новый SDK-экземпляр

## DELETE /api/sdk/{apiKey}
Удалить экземпляр и освободить ресурсы

## GET /api/sdk/{apiKey}/weather/{city}
Получить погоду (с кэшированием)

## POST /api/sdk/multiple?apiKey=...
Получить погоду для списка городов

## GET /api/sdk/{apiKey}/cached-cities
Список закэшированных городов

## GET /api/sdk/{apiKey}/cache-stats
Статистика кэша и режима

## DELETE /api/sdk/{apiKey}/clear-cache
Очистить кэш для ключа

# Запуск проектов
Оба проекта поддерживают запуск в Docker:

bash
# Сборка и запуск (из корня проекта)
docker-compose up --build
База данных: postgres://localhost:5432/weatherdb
Приложение: http://localhost:8081

# Технологии
Java 21
Spring Boot 3.5.7
PostgreSQL
JPA / Hibernate
RestTemplate
Docker / docker-compose

# Структура пакетов
kameleoon.apiweather.sdk
├── controller       → контроллеры
├── dto              → Data Transfer Objects
├── entity           → JPA-сущности
├── exception        → Исключения и обработчик
├── repository       → Spring Data JPA репозитории
├── service          → Логика SDK и кэширования
└── SdkWeather       → Управление экземплярами SDK

